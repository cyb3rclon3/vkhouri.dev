---
import Layout from "../layouts/Layout.astro";
import BackButton from "../components/BackButton.astro";
import Cart from "../components/cart/Cart.astro";
---

<Layout title="Battery Cart | Vaughn Khouri">
  <div class="max-w-screen-md m-auto p-4 my-4 antialiased">
    <h1 class="mb-4 text-3xl font-extrabold leading-tight text-gray-900 lg:mb-6 lg:text-4xl dark:text-white">
      FIRST<br /><span class="text-gradient">Battery Cart</span>
    </h1>

    <Cart />

    <p class="lead text-white">
      <i>A battery cart designed to handle and charge batteries in FRC 8033's shop and at competition.</i>
    </p>
    <br />

    <h2 class="mb-4 text-3xl font-extrabold leading-tight text-gray-900 lg:mb-6 lg:text-3xl dark:text-white">
      Summary
    </h2>

    <p class="text-white">
      In the weeks before the 2024 FIRST World Championship, I sought to improve our battery storage in our pit and in our shop. While we had a basic cart previously, it was unwieldy and not visually appealing. With this cart, I sought to make something that would integrate perfectly with our existing pit tables and tool chest. That meant a finished plywood top, a pre-set depth and height, and four wheels.<br /><br />

      Given the design and time constraints, I chose tab-and-slot construction using 0.5" and 0.75" plywood for the cart. The plan was to CNC it, and then glue and screw it together. In the end, the cart also got some additional quality-of-life features, like a power conditioner to power our pit tools and lights on sometimes subpar competition electricity, and an integrated drawer to store battery-related materials. This was all in addition to the two NOCO Genius chargers wired to hard-mounted SB50 (later upgraded to SB120) connectors, along with an integrated power strip and USB ports.<br /><br />
    </p>

    <h3 class="mb-4 text-3xl font-extrabold leading-tight text-gray-900 lg:mb-6 lg:text-3xl dark:text-white">
      Gallery
    </h3>

    <div id="image-gallery" class="gallery">
      <button id="prev-button" class="gallery-nav-button" aria-label="Previous Image">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6z" />
        </svg>
      </button>

      <img
        id="gallery-image"
        src="./src/assets/cart/img_1.png"
        alt="Gallery Image"
        class="gallery-image"
      />

      <button id="next-button" class="gallery-nav-button" aria-label="Next Image">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z" />
        </svg>
      </button>
    </div>

    <p class="text-white">
      <br />
      The project was a neat combination of carpentry, CNC, and design skills. The end result was a success, and the cart is still used todayâ€”I even released the files publicly, and a few others have been built by other teams. 
      <a href="https://cad.onshape.com/documents/0e8299f18d7bce34f94ed07e/w/8505414828ff2bf795a21a19/e/a2d69c140eceb92deeebc8d5" target="_blank" class="underline inline">Check out the CAD here</a>.
      <br /><br />
    </p>

    <BackButton />
  </div>
</Layout>

<style>
  /* Gallery container styles */
  .gallery {
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }

  /* Gallery image styles */
  .gallery-image {
    max-width: 100%;
    max-height: 500px;
    margin: 0 auto;
    display: block;
    transition: opacity 0.3s ease;
  }

  /* Navigation buttons */
  .gallery-nav-button {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background-color: #f5f5f5;
    border: none;
    cursor: pointer;
    padding: 0.6rem;
    transition: background-color 0.3s ease;
  }

  .gallery-nav-button:hover {
    background-color: #e5e5e5;
  }

  .gallery-nav-button:focus {
    outline: none;
    box-shadow: 0 0 0 4px #0a62f0;
  }

  .gallery-nav-button svg {
    width: 1.5rem;
    height: 1.5rem;
    fill: #000;
  }

  #prev-button {
    left: 3rem;
  }

  #next-button {
    right: 3rem;
  }
</style>

<script>
  // List of gallery images
  const images = [
    './src/assets/cart/img_1.png',
    './src/assets/cart/img_2.png',
    './src/assets/cart/img_3.png',
    './src/assets/cart/img_4.jpg',
    './src/assets/cart/img_5.jpg',
    './src/assets/cart/img_6.jpg',
  ];

  let currentIndex = 0;

  const galleryImage = document.getElementById('gallery-image');
  const prevButton = document.getElementById('prev-button');
  const nextButton = document.getElementById('next-button');

  // Preload all images
  images.forEach((src) => new Image().src = src);

  function updateImage() {
    galleryImage.style.opacity = 0;

    galleryImage.addEventListener(
      'transitionend',
      () => {
        galleryImage.src = images[currentIndex];
        galleryImage.style.opacity = 1;
      },
      { once: true }
    );
  }

  // Event listeners for navigation buttons
  prevButton.addEventListener('click', () => {
    currentIndex = (currentIndex - 1 + images.length) % images.length;
    updateImage();
  });

  nextButton.addEventListener('click', () => {
    currentIndex = (currentIndex + 1) % images.length;
    updateImage();
  });
</script>
